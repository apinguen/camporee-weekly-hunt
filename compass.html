<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Drowned Chart — Week II</title>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Special+Elite&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

  body {
    min-height: 100vh;
    background: #04090f;
    background-image:
      radial-gradient(ellipse at 20% 60%, rgba(0,20,40,0.9) 0%, transparent 55%),
      radial-gradient(ellipse at 80% 25%, rgba(0,10,25,0.7) 0%, transparent 50%);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 48px 16px;
    font-family: 'Crimson Text', serif;
    overflow-x: hidden;
  }

  /* Bubbles */
  body::before {
    content: '';
    position: fixed; inset: 0; pointer-events: none; z-index: 0;
    background-image:
      radial-gradient(2px 2px at 15% 80%, rgba(140,210,255,.20) 0%,transparent 100%),
      radial-gradient(2px 2px at 35% 65%, rgba(140,210,255,.14) 0%,transparent 100%),
      radial-gradient(3px 3px at 55% 72%, rgba(140,210,255,.10) 0%,transparent 100%),
      radial-gradient(2px 2px at 70% 60%, rgba(140,210,255,.18) 0%,transparent 100%),
      radial-gradient(2px 2px at 88% 77%, rgba(140,210,255,.14) 0%,transparent 100%),
      radial-gradient(1px 1px at 8%  50%, rgba(140,210,255,.12) 0%,transparent 100%),
      radial-gradient(2px 2px at 42% 88%, rgba(140,210,255,.16) 0%,transparent 100%),
      radial-gradient(1px 1px at 60% 45%, rgba(140,210,255,.10) 0%,transparent 100%),
      radial-gradient(1px 1px at 92% 55%, rgba(140,210,255,.14) 0%,transparent 100%);
    animation: drift 14s ease-in-out infinite alternate;
  }
  @keyframes drift {
    from { transform: translateY(0); }
    to   { transform: translateY(-18px); }
  }

  /* ── Scroll ── */
  .scroll {
    position: relative; z-index: 1;
    width: 100%; max-width: 520px;
    background:
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500' height='500'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.4' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='500' height='500' filter='url(%23n)' opacity='0.09'/%3E%3C/svg%3E"),
      linear-gradient(155deg, #cde0ea 0%, #b4cdd8 45%, #8aafc0 100%);
    border-radius: 2px;
    box-shadow:
      0 0 0 7px #2a6080,
      0 0 0 11px #0e2a38,
      0 0 50px rgba(60,160,220,.18),
      0 30px 90px rgba(0,0,0,0.85);
    padding: 52px 48px 44px;
    animation: unfurl .9s cubic-bezier(.22,1,.36,1) both;
  }

  @keyframes unfurl {
    from { opacity:0; transform:translateY(20px) scaleY(.97); }
    to   { opacity:1; transform:translateY(0)    scaleY(1);   }
  }

  .scroll::before,
  .scroll::after {
    content: '';
    display: block;
    height: 22px;
    background: linear-gradient(90deg, #0e2a38 0%, #2a6080 28%, #3a8aaa 50%, #2a6080 72%, #0e2a38 100%);
    margin: -52px -48px 46px;
    border-radius: 2px 2px 0 0;
    box-shadow: 0 4px 14px rgba(0,0,0,.5);
  }
  .scroll::after {
    margin: 42px -48px -44px;
    border-radius: 0 0 2px 2px;
    box-shadow: 0 -4px 14px rgba(0,0,0,.5);
  }

  .riddle {
    font-size: clamp(1.05rem, 2.6vw, 1.2rem);
    color: #0a1e28;
    line-height: 1.95;
    text-align: center;
    margin-bottom: 34px;
  }

  .hint {
    display: none;
    font-style: italic;
    font-size: 0.93rem;
    color: #1e4a60;
    text-align: center;
    border-top: 1px solid rgba(0,0,0,.13);
    padding-top: 18px;
    margin-bottom: 28px;
    line-height: 1.7;
  }
  .hint.show { display: block; }

  .entry { display: flex; gap: 8px; }

  input {
    flex: 1;
    background: rgba(255,255,255,.22);
    border: 1.5px solid rgba(0,0,0,.18);
    border-radius: 2px;
    padding: 11px 14px;
    font-family: 'Crimson Text', serif;
    font-size: 1.05rem;
    color: #0a1e28;
    outline: none;
    transition: border-color .2s;
  }
  input:focus { border-color: rgba(0,0,0,.40); }
  input::placeholder { color: rgba(20,60,80,.35); }

  button {
    background: #0e2a38;
    color: #cde0ea;
    border: none;
    padding: 11px 20px;
    font-family: 'Special Elite', cursive;
    font-size: 0.76rem;
    letter-spacing: .18em;
    text-transform: uppercase;
    border-radius: 2px;
    cursor: pointer;
    transition: background .2s;
    white-space: nowrap;
  }
  button:hover { background: #1a4a60; }

  .fb {
    min-height: 20px;
    margin-top: 11px;
    font-family: 'Special Elite', cursive;
    font-size: 0.80rem;
    letter-spacing: .04em;
    text-align: center;
    color: #1a3a50;
  }
  .fb.ok { color: #1a5a2a; }

  .nxt {
    display: none;
    margin-top: 22px;
    padding: 18px 16px;
    background: rgba(0,0,0,.07);
    border: 1px solid rgba(0,0,0,.14);
    border-radius: 2px;
    text-align: center;
  }
  .nxt.show { display: block; }
  .nxt p { font-style: italic; font-size: 0.95rem; color: #1e3a4a; line-height: 1.6; margin-bottom: 10px; }
  .nxt .url { font-family: 'Special Elite', cursive; font-size: 0.86rem; color: #0a1e28; word-break: break-all; letter-spacing: .03em; }
  .nxt .url b { color: #1a3a7a; font-weight: normal; font-size: 1rem; }
  .nxt a {
    display: inline-block; margin-top: 13px;
    font-family: 'Special Elite', cursive; font-size: 0.76rem; letter-spacing: .14em;
    text-transform: uppercase; color: #1a3a7a; text-decoration: none; border-bottom: 1px dashed #1a3a7a;
  }
  .nxt a:hover { opacity: .65; }
</style>
</head>
<body>
<div class="scroll">

  <div class="riddle">
    Older than any ship that ever sailed,<br>
    yet never built by hand.<br>
    I have no crew, no flag, no captain —<br>
    yet every captain steers by me when the sun sleeps.<br><br>
    I am not one, but many thousands,<br>
    scattered long before men named me.<br><br>
    What am I?
  </div>

  <div class="hint" id="hint">
    Look up on any clear night at sea —<br>
    the North Star is among their number.
  </div>

  <div class="entry">
    <input id="inp" type="text" placeholder="your answer…" autocomplete="off" autocorrect="off" spellcheck="false">
    <button onclick="check()">Submit</button>
  </div>
  <div class="fb" id="fb"></div>

  <div class="nxt" id="nxt">
    <p id="nxtMsg"></p>
    <div class="url" id="nxtUrl"></div>
    <a id="nxtLink" href="#" style="display:none;">→ take me there</a>
  </div>

</div>
<script>
  const ACCEPTS = ["stars","a star","the stars","star"];
  const ANSWER  = "stars";
  const NEXT    = "stars.html";
  let wrong = 0;

  document.getElementById('inp').addEventListener('keydown', e => { if(e.key==='Enter') check(); });

  async function check() {
    const val = document.getElementById('inp').value.trim().toLowerCase();
    const fb  = document.getElementById('fb');
    if (ACCEPTS.includes(val)) {
      fb.textContent = ''; fb.className = 'fb ok';
      await reveal();
    } else {
      wrong++;
      if (wrong >= 3) document.getElementById('hint').classList.add('show');
      fb.textContent = wrong === 1 ? "That be not it — think harder."
                     : wrong === 2 ? "Wrong again. The sea mocks ye."
                     :               "Still wrong. Perhaps the hint will aid ye.";
      fb.className = 'fb';
    }
  }

  async function reveal() {
    const base = location.href.replace(/[^/]*$/, '');
    let exists = false;
    try { const r = await fetch(NEXT, {method:'HEAD', cache:'no-store'}); exists = r.ok; } catch(_){}

    const nxt  = document.getElementById('nxt');
    const msg  = document.getElementById('nxtMsg');
    const url  = document.getElementById('nxtUrl');
    const link = document.getElementById('nxtLink');

    nxt.classList.add('show');
    if (exists) {
      msg.textContent    = 'The answer is the path:';
      url.innerHTML      = base + '<b>' + ANSWER + '</b>.html';
      link.href          = NEXT;
      link.style.display = 'inline';
    } else {
      msg.innerHTML      = 'Well solved — but the next clue has not yet been revealed.<br>Return next week.';
    }
  }
</script>
</body>
</html>
